(function(){"use strict";var e={187:function(e,t,o){var a=o(9242),i=o(3396);function s(e,t,o,a,s,n){const r=(0,i.up)("the-main");return(0,i.wg)(),(0,i.j4)(i.n4,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r)])),_:1})}var n=o(7139);const r={class:"site-wrapper"},l={class:"site-wrapper__header"},c={class:"site-wrapper__main"},d={class:"site-content",role:"main"};function u(e,t,o,s,u,v){const m=(0,i.up)("the-header"),p=(0,i.up)("base-modal"),g=(0,i.up)("base-spinner"),_=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",l,[(0,i.Wm)(m)]),(0,i._)("div",c,[(0,i._)("main",d,[(0,i.Wm)(p,{show:!!s.error,title:"An error ocuured!",onClose:s.handleError},{default:(0,i.w5)((()=>[(0,i._)("p",null,(0,n.zw)(s.error),1)])),_:1},8,["show","onClose"]),s.isLoading?((0,i.wg)(),(0,i.j4)(g,{key:0})):(0,i.kq)("",!0),(0,i.Wm)(_,null,{default:(0,i.w5)((({Component:e,route:t})=>[(0,i.Wm)(a.uT,{name:"fade",mode:"out-in"},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(e),{key:t.path}))])),_:2},1024)])),_:1})])])])}const v={class:"header",role:"banner"},m={class:"header__logo"},p={class:"header__nav"},g={class:"mob-nav","aria-modal":"true",role:"dialog"},_=["aria-expanded"],f={class:"header__login"},h={class:"header__nav-toggle"};function w(e,t,o,a,s,r){const l=(0,i.up)("header-logo"),c=(0,i.up)("nav-list"),d=(0,i.up)("base-icon"),u=(0,i.up)("base-button"),w=(0,i.up)("header-auth");return(0,i.wg)(),(0,i.iD)("header",v,[(0,i._)("div",m,[(0,i.Wm)(l)]),(0,i._)("div",p,[(0,i.Wm)(c)]),(0,i._)("div",{class:(0,n.C_)(["header__nav is-aside",{"is-open":a.isOpen}])},[(0,i._)("div",g,[(0,i.Wm)(u,{class:"mob-nav__close",onClick:a.toggleNav},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{prefix:"fas","icon-name":"times"})])),_:1},8,["onClick"]),(0,i.Wm)(c),(0,i.Wm)(w)]),(0,i._)("div",{class:(0,n.C_)(["mob-nav-overlay",{"is-open":a.isOpen}]),onClick:t[0]||(t[0]=(...e)=>a.toggleNav&&a.toggleNav(...e)),"aria-expanded":a.isOpen},null,10,_)],2),(0,i._)("div",f,[(0,i.Wm)(w)]),(0,i._)("nav",h,[(0,i.Wm)(u,{onClick:a.toggleNav,class:"mob-nav-toggle","aria-haspopup":"true"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{prefix:"fas","icon-name":"bars"})])),_:1},8,["onClick"])])])}const b=e=>((0,i.dD)("data-v-20e86844"),e=e(),(0,i.Cn)(),e),k=b((()=>(0,i._)("span",{class:"logo__image"},[(0,i._)("svg",{fill:"#000000",height:"800px",width:"800px",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 210.233 210.233","xml:space":"preserve"},[(0,i._)("g",null,[(0,i._)("g",null,[(0,i._)("g",null,[(0,i._)("path",{d:"M33.736,86.705c3.297,2.671,7.267,3.969,11.214,3.969c5.206,0,10.366-2.258,13.891-6.608\r\n                                c6.19-7.651,5.009-18.911-2.638-25.103c-3.703-3-8.336-4.379-13.101-3.881c-4.741,0.498-9.006,2.812-12.008,6.518\r\n                                c-3.002,3.706-4.377,8.357-3.881,13.099C27.712,79.44,30.029,83.703,33.736,86.705z M37.261,66.591\r\n                                c1.666-2.059,4.036-3.345,6.67-3.622c0.353-0.037,0.705-0.054,1.054-0.054c2.262,0,4.439,0.767,6.225,2.212\r\n                                c4.246,3.44,4.904,9.696,1.464,13.945c-3.44,4.251-9.704,4.906-13.949,1.466c-2.057-1.668-3.347-4.036-3.622-6.67\r\n                                C34.828,71.234,35.592,68.65,37.261,66.591z"}),(0,i._)("path",{d:"M113.468,134.565c-4.509-1.551-9.347-1.257-13.635,0.835c-4.284,2.09-7.499,5.723-9.053,10.232\r\n                                c-1.554,4.509-1.255,9.353,0.833,13.635c2.092,4.286,5.725,7.501,10.234,9.053c1.902,0.656,3.866,0.982,5.826,0.982\r\n                                c2.673,0,5.334-0.608,7.81-1.815c4.284-2.09,7.499-5.724,9.053-10.232s1.255-9.353-0.837-13.637\r\n                                C121.611,139.334,117.977,136.118,113.468,134.565z M117.032,154.671c-0.86,2.506-2.646,4.524-5.028,5.685\r\n                                c-2.382,1.161-5.063,1.33-7.577,0.463c-2.503-0.862-4.52-2.648-5.683-5.028c-1.162-2.38-1.325-5.071-0.461-7.575\r\n                                c0.86-2.506,2.646-4.524,5.028-5.685c1.395-0.682,2.874-1.003,4.331-1.003c3.672,0,7.209,2.049,8.929,5.568\r\n                                C117.733,149.477,117.896,152.167,117.032,154.671z"}),(0,i._)("path",{d:"M150.694,107c-2.526-4.044-6.477-6.86-11.125-7.935c-4.633-1.065-9.421-0.271-13.473,2.256\r\n                                c-4.044,2.528-6.86,6.477-7.933,11.123c-2.212,9.589,3.789,19.192,13.38,21.408c1.344,0.31,2.688,0.459,4.013,0.459\r\n                                c8.123,0,15.491-5.594,17.393-13.837C154.022,115.83,153.22,111.044,150.694,107z M145.217,118.691\r\n                                c-1.228,5.324-6.551,8.652-11.892,7.432c-5.326-1.232-8.662-6.568-7.43-11.896c0.593-2.58,2.161-4.772,4.408-6.176\r\n                                c1.596-0.998,3.397-1.511,5.233-1.511c0.748,0,1.503,0.085,2.251,0.256c2.58,0.597,4.776,2.163,6.178,4.41\r\n                                C145.372,113.449,145.814,116.109,145.217,118.691z"}),(0,i._)("path",{d:"M52.403,112.444c-1.073-4.647-3.889-8.596-7.933-11.123c-4.044-2.527-8.832-3.33-13.473-2.255\r\n                                c-4.649,1.073-8.6,3.889-11.125,7.933c-2.525,4.044-3.328,8.83-2.255,13.473c1.902,8.245,9.27,13.837,17.393,13.837\r\n                                c1.325,0,2.669-0.147,4.013-0.459C48.615,131.636,54.615,122.033,52.403,112.444z M37.242,126.12\r\n                                c-5.322,1.236-10.66-2.106-11.892-7.432c-0.597-2.58-0.155-5.239,1.251-7.484c1.402-2.247,3.599-3.814,6.178-4.408\r\n                                c0.748-0.173,1.503-0.257,2.251-0.257c1.836,0,3.637,0.513,5.233,1.511c2.247,1.404,3.816,3.597,4.408,6.176\r\n                                C45.903,119.554,42.568,124.891,37.242,126.12z"}),(0,i._)("path",{d:"M103.133,53.417c0-9.843-8.007-17.85-17.85-17.85s-17.85,8.007-17.85,17.85s8.007,17.85,17.85,17.85\r\n                                S103.133,63.26,103.133,53.417z M85.283,63.333c-5.47,0-9.917-4.449-9.917-9.917c0-5.468,4.447-9.917,9.917-9.917\r\n                                c5.47,0,9.917,4.449,9.917,9.917C95.2,58.884,90.753,63.333,85.283,63.333z"}),(0,i._)("path",{d:"M125.616,90.674c3.947,0,7.918-1.298,11.214-3.969c3.707-3.002,6.024-7.265,6.523-12.008\r\n                                c0.496-4.741-0.879-9.394-3.881-13.099c-6.194-7.647-17.459-8.826-25.105-2.638c-7.651,6.194-8.832,17.455-2.642,25.105\r\n                                C115.25,88.415,120.41,90.674,125.616,90.674z M119.356,65.127c4.257-3.446,10.509-2.783,13.949,1.464\r\n                                c1.67,2.059,2.433,4.643,2.157,7.277c-0.275,2.634-1.565,5.003-3.622,6.67c-4.257,3.446-10.505,2.785-13.949-1.466\r\n                                C114.452,74.823,115.111,68.567,119.356,65.127z"}),(0,i._)("path",{d:"M70.734,135.4c-4.288-2.092-9.127-2.388-13.635-0.835c-4.508,1.553-8.142,4.768-10.23,9.053\r\n                                c-2.092,4.284-2.39,9.128-0.837,13.637c1.553,4.509,4.768,8.142,9.053,10.232c2.475,1.207,5.136,1.815,7.81,1.815\r\n                                c1.956,0,3.924-0.325,5.826-0.982c4.509-1.551,8.142-4.767,10.23-9.051c2.092-4.284,2.39-9.128,0.837-13.637\r\n                                C78.235,141.123,75.018,137.489,70.734,135.4z M71.818,155.793c-1.158,2.378-3.177,4.164-5.679,5.026\r\n                                c-2.51,0.868-5.195,0.697-7.577-0.463c-2.382-1.16-4.168-3.178-5.028-5.685c-0.864-2.504-0.701-5.195,0.461-7.575\r\n                                c1.72-3.519,5.257-5.568,8.929-5.568c1.457,0,2.936,0.322,4.331,1.003c2.382,1.16,4.168,3.178,5.028,5.685\r\n                                C73.147,150.72,72.984,153.41,71.818,155.793z"}),(0,i._)("path",{d:"M210.209,185.862c-0.239-2.175-2.176-3.761-4.38-3.504c-32.059,3.517-44.853-33.426-45.384-35.001\r\n                                c-0.135-0.403-0.371-0.734-0.61-1.059c6.817-12.251,10.733-26.328,10.733-41.315c0-47.025-38.257-85.283-85.283-85.283\r\n                                C38.259,19.7,0,57.959,0,104.983c0,47.024,38.257,85.283,85.283,85.283c28.642,0,53.972-14.238,69.445-35.959\r\n                                c4.734,10.535,19.118,36.226,46.808,36.226c1.674,0,3.397-0.095,5.167-0.292C208.88,190.001,210.449,188.039,210.209,185.862z\r\n                                M85.283,182.333c-42.65,0-77.35-34.699-77.35-77.35s34.7-77.35,77.35-77.35c42.65,0,77.35,34.699,77.35,77.35\r\n                                S127.933,182.333,85.283,182.333z"})])])])])],-1)));function y(e,t){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.j4)(o,{class:"logo",to:"movies"},{default:(0,i.w5)((()=>[k])),_:1})}var M=o(89);const I={},C=(0,M.Z)(I,[["render",y],["__scopeId","data-v-20e86844"]]);var W=C;const x={class:"login"};function j(e,t,o,a,s,n){const r=(0,i.up)("base-button");return(0,i.wg)(),(0,i.iD)("div",x,[a.isAuth?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:0,modifier:"is-tertiary is-login",link:"true",to:"/login",onClick:a.toggleNav},{default:(0,i.w5)((()=>[(0,i.Uk)("Login")])),_:1},8,["onClick"])),a.isAuth?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,modifier:"is-secondary is-singup",link:"true",to:"/singup",onClick:a.toggleNav},{default:(0,i.w5)((()=>[(0,i.Uk)("Sign up")])),_:1},8,["onClick"])),a.isAuth?((0,i.wg)(),(0,i.j4)(r,{key:2,modifier:"is-secondary is-logout",onClick:a.logout},{default:(0,i.w5)((()=>[(0,i.Uk)("Logout")])),_:1},8,["onClick"])):(0,i.kq)("",!0)])}var F=o(65),T={setup(){const e=(0,F.oR)(),t=(0,i.Fl)((()=>e.getters.isAuthenticated)),o=(0,i.f3)("toggleNav"),a=()=>{e.dispatch("logout"),o()};return{isAuth:t,logout:a,toggleNav:o}}};const S=(0,M.Z)(T,[["render",j],["__scopeId","data-v-704a838c"]]);var V=S;const D={class:"nav",role:"navigation"},L={class:"nav__list"};function H(e,t,o,a,s,n){const r=(0,i.up)("nav-item");return(0,i.wg)(),(0,i.iD)("nav",D,[(0,i._)("ul",L,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.navLinks,(e=>((0,i.wg)(),(0,i.j4)(r,{to:e.href,text:e.text,key:e.text,badge:e.hasBadge},null,8,["to","text","badge"])))),128))])])}const z={class:"nav__item"};function E(e,t,o,a,s,r){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("li",z,[(0,i.Wm)(l,{to:o.to,class:"nav__link",onClick:a.toggleNav},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(a.linkText)+" ",1),a.hasBadge?((0,i.wg)(),(0,i.iD)("span",{key:0,class:(0,n.C_)(["nav__link-badge",a.activeBadgeClass])},(0,n.zw)(a.favoritesLength),3)):(0,i.kq)("",!0)])),_:1},8,["to","onClick"])])}var N=o(4870),O={props:["to","text","badge"],setup(e){const t=(0,F.oR)(),o=(0,i.Fl)((()=>e.text.toUpperCase())),a=(0,i.Fl)((()=>t.getters.favoriteMovies.length)),s=(0,i.Fl)((()=>e.badge&&a.value>0)),n=(0,N.iH)(""),r=(0,i.f3)("toggleNav");return(0,i.YP)(a,(()=>{n.value="is-active",setTimeout((()=>{n.value=""}),300)})),{linkText:o,favoritesLength:a,hasBadge:s,activeBadgeClass:n,toggleNav:r}}};const Z=(0,M.Z)(O,[["render",E],["__scopeId","data-v-67b5fdfe"]]);var U=Z;const q=[{href:"/movies",text:"Movies",hasBadge:!1},{href:"/favorites",text:"Favorites",hasBadge:!0}];var B=q,R={components:{NavItem:U},setup(){const e=(0,N.iH)(B);return{navLinks:e}}};const P=(0,M.Z)(R,[["render",H],["__scopeId","data-v-6fcb9026"]]);var $=P,A={components:{HeaderLogo:W,HeaderAuth:V,NavList:$},setup(){const e=(0,N.iH)(!1),t=()=>{const t=window.innerWidth;t<768&&(e.value=!e.value)};return(0,i.JJ)("toggleNav",t),{toggleNav:t,isOpen:e}}};const Y=(0,M.Z)(A,[["render",w],["__scopeId","data-v-5c7c10b0"]]);var G=Y,J={name:"SiteMain",components:{TheHeader:G},async setup(){const e=(0,F.oR)(),t=(0,N.iH)(!1),o=(0,N.iH)(null),a=()=>{o.value=null};e.dispatch("autoLogin"),t.value=!0;try{await e.dispatch("loadMovies")}catch(i){o.value=i.message||"Something went wrong"}return t.value=!1,{isLoading:t,error:o,handleError:a}}};const K=(0,M.Z)(J,[["render",u]]);var Q=K,X={name:"App",components:{TheMain:Q}};const ee=(0,M.Z)(X,[["render",s]]);var te=ee,oe=o(2483);function ae(e,t,o,a,s,n){const r=(0,i.up)("add-movie"),l=(0,i.up)("movies-list",!0),c=(0,i.up)("base-section");return(0,i.wg)(),(0,i.j4)(c,{class:"movies",title:"Movies",hiddenTitle:!0},{default:(0,i.w5)((()=>[(0,i.Wm)(r),(0,i.Wm)(l,{movies:a.movies},null,8,["movies"])])),_:1})}function ie(e,t,o,s,n,r){const l=(0,i.up)("tools-bar"),c=(0,i.up)("movie-item"),d=(0,i.up)("movie-placeholder");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(l),s.hasMovies?((0,i.wg)(),(0,i.j4)(a.W3,{key:0,class:"movies-list",tag:"ul",name:"movies-list"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.filteredMovies,(e=>((0,i.wg)(),(0,i.j4)(c,{key:e.id,id:e.id,img:e.img,title:e.title,description:e.description},null,8,["id","img","title","description"])))),128))])),_:1})):((0,i.wg)(),(0,i.j4)(d,{key:1,text:"No movies yet"}))],64)}const se={class:"movie-item"},ne={class:"movie-item__container"},re={class:"movie-item__picture"},le=["src"],ce={class:"movie-item__wrap"},de={class:"movie-item__content"},ue={class:"movie-item__title"},ve={class:"movie-item__description"},me={class:"movie-item__actions"};function pe(e,t,o,a,s,r){const l=(0,i.up)("base-button");return(0,i.wg)(),(0,i.iD)("li",se,[(0,i._)("div",ne,[(0,i._)("div",re,[(0,i._)("img",{src:o.img,alt:"image"},null,8,le)]),(0,i._)("div",ce,[(0,i._)("div",de,[(0,i._)("h3",ue,(0,n.zw)(o.title),1),(0,i._)("p",ve,(0,n.zw)(o.description),1)]),(0,i._)("div",me,[(0,i.Wm)(l,{onClick:a.removeMovie},{default:(0,i.w5)((()=>[(0,i.Uk)("Not interesting")])),_:1},8,["onClick"]),(0,i.Wm)(l,{link:!0,to:a.detailLink,modifier:"is-secondary"},{default:(0,i.w5)((()=>[(0,i.Uk)("See more")])),_:1},8,["to"])])])])])}var ge={props:["id","img","title","description"],setup(e){const t=(0,F.oR)(),o=(0,i.Fl)((()=>"/movies/"+e.id)),a=async()=>{try{t.dispatch("removeMovie",e.id)}catch(o){console.log(o)}};return{detailLink:o,removeMovie:a}}};const _e=(0,M.Z)(ge,[["render",pe],["__scopeId","data-v-2e4d410a"]]);var fe=_e;const he={class:"movie-placeholder"},we={class:"movie-placeholder__text"};function be(e,t,o,a,s,r){const l=(0,i.up)("base-icon");return(0,i.wg)(),(0,i.iD)("div",he,[(0,i.Wm)(l,{prefix:"fas",iconName:"face-sad-tear",class:"movie-placeholder__icon"}),(0,i._)("p",we,(0,n.zw)(o.text),1)])}var ke={props:["text"]};const ye=(0,M.Z)(ke,[["render",be],["__scopeId","data-v-329abfde"]]);var Me=ye;const Ie={class:"movies-tool"},Ce={class:"movies-tool__list"},We={class:"movies-tool__list-item"},xe={class:"movies-tool__list-item"},je={class:"movies-tool__list-item"};function Fe(e,t,o,a,s,n){const r=(0,i.up)("search-bar"),l=(0,i.up)("sort-bar"),c=(0,i.up)("filter-bar");return(0,i.wg)(),(0,i.iD)("div",Ie,[(0,i._)("ul",Ce,[(0,i._)("li",We,[(0,i.Wm)(r)]),(0,i._)("li",xe,[(0,i.Wm)(l)]),(0,i._)("li",je,[(0,i.Wm)(c)])])])}const Te={class:"movies-filter"},Se=["value"];function Ve(e,t,o,a,s,r){const l=(0,i.up)("base-select");return(0,i.wg)(),(0,i.iD)("div",Te,[(0,i.Wm)(l,{id:"filter",modelValue:a.selectedOption,label:"Filter",hiddenLabel:!0,onChangeSelect:a.changeHandler},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.genres,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e},(0,n.zw)(e),9,Se)))),128))])),_:1},8,["modelValue","onChangeSelect"])])}o(7658);const De=["for"],Le=["name","id","value"];function He(e,t,o,a,s,r){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("label",{for:o.id,class:(0,n.C_)(!o.hiddenLabel||"ghost")},(0,n.zw)(o.label),11,De),(0,i._)("select",{name:o.id,id:o.id,ref:"select",value:o.modelValue,onInput:t[0]||(t[0]=(...e)=>a.updateValue&&a.updateValue(...e)),onChange:t[1]||(t[1]=(...e)=>a.changeValue&&a.changeValue(...e))},[(0,i.WI)(e.$slots,"default",{},void 0,!0)],40,Le)],64)}var ze={props:["id","label","modelValue","hiddenLabel"],emits:["update:modelValue","change-select"],setup(e,t){const o=(0,N.iH)(null),a=e=>{t.emit("update:modelValue",e.target.value)},i=e=>{t.emit("change-select",e.target)};return{updateValue:a,changeValue:i,select:o}}};const Ee=(0,M.Z)(ze,[["render",He],["__scopeId","data-v-6b890300"]]);var Ne=Ee,Oe={components:{BaseSelect:Ne},setup(){const e=(0,oe.tv)(),t=(0,oe.yj)(),o=(0,F.oR)(),a=(0,i.Fl)((()=>t.query.filter)),s=(0,i.f3)("selectedMovies"),n=o.getters.allMoviesOption,r=(0,i.Fl)((()=>{const e=s.value.map((e=>e.genre.split(",")));return e.unshift(n),[...new Set(e.flat().map((e=>e.trim())))]})),l=(0,i.Fl)((()=>r.value.find((e=>e===a.value))||n)),c=a=>{const i=a.value?`${t.path}?filter=${a.value}`:t.path;o.dispatch("filterMovies",{genre:a.value,movies:s.value}),e.push(i)};return(0,i.YP)(a,(e=>{e||o.dispatch("filterMovies",{genre:e,movies:s.value})})),{changeHandler:c,genres:r,selectedOption:l}}};const Ze=(0,M.Z)(Oe,[["render",Ve]]);var Ue=Ze;const qe=e=>((0,i.dD)("data-v-0702d6e3"),e=e(),(0,i.Cn)(),e),Be={class:"movies-sort"},Re=qe((()=>(0,i._)("span",{class:"movies-sort__text"},"Sort by year",-1)));function Pe(e,t,o,a,s,n){const r=(0,i.up)("base-icon"),l=(0,i.up)("base-button");return(0,i.wg)(),(0,i.iD)("div",Be,[(0,i.Wm)(l,{class:"movies-sort__toggle",onClick:a.toggleSort},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{class:"movies-sort__toggle-icon",prefix:"fas",iconName:"arrow-up"}),(0,i.Wm)(r,{class:"movies-sort__toggle-icon",prefix:"fas",iconName:"arrow-down"}),Re])),_:1},8,["onClick"])])}var $e={setup(){const e=(0,F.oR)(),t=(0,i.Fl)((()=>e.getters.filteredMovies));let o=!1;const a=()=>{o?t.value.sort(((e,t)=>e.year<t.year?-1:1)):t.value.sort(((e,t)=>e.year>t.year?-1:1)),o=!o};return{toggleSort:a}}};const Ae=(0,M.Z)($e,[["render",Pe],["__scopeId","data-v-0702d6e3"]]);var Ye=Ae;const Ge={class:"movies-search"};function Je(e,t,o,a,s,n){const r=(0,i.up)("base-input");return(0,i.wg)(),(0,i.iD)("div",Ge,[(0,i.Wm)(r,{hiddenLabel:!0,label:"Search movie",id:"search",name:"search",placeholder:"Search..",modelValue:a.searchTerm,"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchTerm=e),modelModifiers:{trim:!0},ref:"searchInput"},null,8,["modelValue"])])}const Ke={class:"form-control"},Qe=["for"],Xe=["type","id","name","placeholder","value"];function et(e,t,o,a,s,r){return(0,i.wg)(),(0,i.iD)("div",Ke,[(0,i._)("label",{for:o.id,class:(0,n.C_)(!o.hiddenLabel||"ghost")},(0,n.zw)(o.label),11,Qe),(0,i._)("input",{type:a.inputType,id:o.id,name:o.id,placeholder:o.placeholder,value:o.modelValue,onInput:t[0]||(t[0]=(...e)=>a.updateValue&&a.updateValue(...e)),ref:"input"},null,40,Xe)])}var tt={props:["id","type","label","placeholder","modelValue","hiddenLabel"],emits:["update:modelValue"],setup(e,t){const o=(0,N.iH)(null),a=(0,i.Fl)((()=>e.type?e.type:"text")),s=e=>{t.emit("update:modelValue",e.target.value)};return{inputType:a,updateValue:s,input:o}}};const ot=(0,M.Z)(tt,[["render",et],["__scopeId","data-v-fddd4e0e"]]);var at=ot,it={components:{BaseInput:at},setup(){const e=(0,F.oR)(),t=(0,oe.tv)(),o=(0,N.iH)(""),a=(0,N.iH)(null),s=(0,i.f3)("selectedMovies"),n=e.getters.allMoviesOption;return(0,i.YP)(o,(o=>{e.dispatch("searchMovies",{searchTerm:o,movies:s.value}),t.replace({query:{filter:n}})})),{searchTerm:o,searchInput:a}}};const st=(0,M.Z)(it,[["render",Je]]);var nt=st,rt={components:{FilterBar:Ue,SortBar:Ye,SearchBar:nt}};const lt=(0,M.Z)(rt,[["render",Fe],["__scopeId","data-v-0bc8af5c"]]);var ct=lt,dt={props:["movies"],components:{MovieItem:fe,MoviePlaceholder:Me,ToolsBar:ct},setup(e){const t=(0,oe.yj)(),o=(0,F.oR)(),a=(0,i.Fl)((()=>t.query.filter)),s=(0,i.Fl)((()=>e.movies)),n=(0,i.Fl)((()=>o.getters.filteredMovies)),r=(0,i.Fl)((()=>o.getters.hasMovies));return o.dispatch("filterMovies",{genre:a.value,movies:s.value}),(0,i.YP)(s,(()=>{o.dispatch("filterMovies",{genre:a.value,movies:s.value})})),(0,i.JJ)("selectedMovies",s),{filteredMovies:n,hasMovies:r}}};const ut=(0,M.Z)(dt,[["render",ie],["__scopeId","data-v-1f22d346"]]);var vt=ut;const mt={class:"search-bar"};function pt(e,t,o,s,r,l){const c=(0,i.up)("base-modal"),d=(0,i.up)("base-spinner"),u=(0,i.up)("base-input"),v=(0,i.up)("error-message"),m=(0,i.up)("base-icon"),p=(0,i.up)("base-button"),g=(0,i.up)("base-form");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(c,{show:!!s.error,title:"An error ocuured!",onClose:s.handleError},{default:(0,i.w5)((()=>[(0,i._)("p",null,(0,n.zw)(s.error),1)])),_:1},8,["show","onClose"]),(0,i._)("div",mt,[s.isLoading?((0,i.wg)(),(0,i.j4)(d,{key:0})):(0,i.kq)("",!0),(0,i.Wm)(g,{actions:!0,onSubmit:(0,a.iM)(s.submitForm,["prevent"])},{actions:(0,i.w5)((()=>[(0,i.Wm)(p,{type:"submit",title:"search"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{prefix:"fas","icon-name":"plus"})])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(u,{label:"Movie",id:"add",placeholder:"Start adding movie..",modelValue:s.movieName,"onUpdate:modelValue":t[0]||(t[0]=e=>s.movieName=e),modelModifiers:{trim:!0}},null,8,["modelValue"]),(0,i.Wm)(a.uT,{name:"fade",mode:"out-in"},{default:(0,i.w5)((()=>[s.inputIsValid?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(v,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)("field must not be empty")])),_:1}))])),_:1})])),_:1},8,["onSubmit"])])],64)}const gt={class:"form",novalidate:""},_t={key:0,class:"form-actions"};function ft(e,t,o,a,s,n){return(0,i.wg)(),(0,i.iD)("form",gt,[(0,i.WI)(e.$slots,"default",{},void 0,!0),o.actions?((0,i.wg)(),(0,i.iD)("div",_t,[(0,i.WI)(e.$slots,"actions",{},void 0,!0)])):(0,i.kq)("",!0)])}var ht={props:["actions"]};const wt=(0,M.Z)(ht,[["render",ft],["__scopeId","data-v-159d8c7d"]]);var bt=wt;const kt={class:"error-message"};function yt(e,t){return(0,i.wg)(),(0,i.iD)("p",kt,[(0,i.WI)(e.$slots,"default",{},void 0,!0)])}const Mt={},It=(0,M.Z)(Mt,[["render",yt],["__scopeId","data-v-5caed473"]]);var Ct=It,Wt={components:{BaseForm:bt,BaseInput:at,ErrorMessage:Ct},setup(){const e=(0,F.oR)(),t=(0,oe.tv)(),o=(0,N.iH)(null),a=(0,N.iH)(!0),s=(0,N.iH)(null),n=(0,N.iH)(!1),r=(0,i.Fl)((()=>e.getters.isAuthenticated)),l=async()=>{if(o.value){n.value=!0,r.value||t.push("login");try{await e.dispatch("addMovie",o.value),o.value="",t.push("/movies")}catch(i){s.value=i.message||"Something went wrong"}n.value=!1}else a.value=!1},c=()=>{s.value=null};return(0,i.YP)(o,(e=>{e.length&&(a.value=!0)})),{movieName:o,submitForm:l,inputIsValid:a,error:s,handleError:c,isLoading:n}}};const xt=(0,M.Z)(Wt,[["render",pt]]);var jt=xt,Ft={components:{MoviesList:vt,AddMovie:jt},setup(){const e=(0,F.oR)(),t=(0,i.Fl)((()=>e.getters.movies));return{movies:t}}};const Tt=(0,M.Z)(Ft,[["render",ae]]);var St=Tt;function Vt(e,t,o,a,s,n){const r=(0,i.up)("movie-detail",!0);return(0,i.wg)(),(0,i.j4)(r,{id:a.selectedMovie.id,img:a.selectedMovie.img,title:a.selectedMovie.title,rating:a.selectedMovie.rating,rated:a.selectedMovie.rated,year:a.selectedMovie.year,genres:a.selectedMovie.genre,runtime:a.selectedMovie.runtime,description:a.selectedMovie.description,favorite:a.selectedMovie.favorite},null,8,["id","img","title","rating","rated","year","genres","runtime","description","favorite"])}const Dt=e=>((0,i.dD)("data-v-12f275b3"),e=e(),(0,i.Cn)(),e),Lt={class:"movie__container"},Ht={class:"movie__actions is-top"},zt={class:"movie__wrapper"},Et={class:"movie__picture"},Nt=["src"],Ot={class:"movie__content"},Zt={class:"movie__title"},Ut={class:"movie__rating"},qt={class:"movie__rating-number"},Bt={class:"movie__info"},Rt={class:"movie__info-rated"},Pt={class:"movie__info-year"},$t={class:"movie__info-runtime"},At={class:"movie__genres"},Yt={class:"movie__description"},Gt={class:"movie__actions is-bottom"},Jt=Dt((()=>(0,i._)("span",{class:"movie__action-text"},"back",-1)));function Kt(e,t,o,a,s,r){const l=(0,i.up)("base-icon"),c=(0,i.up)("base-button"),d=(0,i.up)("base-section");return(0,i.wg)(),(0,i.j4)(d,{class:"movie",title:"Movie",hiddenTitle:!0},{default:(0,i.w5)((()=>[(0,i._)("div",Lt,[(0,i._)("div",Ht,[(0,i.Wm)(c,{class:(0,n.C_)(["movie__action is-only-icon is-favorite",{"is-active":a.isFavorite}]),title:"favorite",onClick:a.toggleFavoriteMovie,ref:"toggle"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{class:"movie__action-icon",prefix:"fas",iconName:"heart"})])),_:1},8,["class","onClick"])]),(0,i._)("div",zt,[(0,i._)("div",Et,[(0,i._)("img",{src:o.img,alt:"image"},null,8,Nt)]),(0,i._)("div",Ot,[(0,i._)("h3",Zt,(0,n.zw)(o.title),1),(0,i._)("p",Ut,[(0,i.Wm)(l,{class:"movie__rating-svg",prefix:"fas",iconName:"star"}),(0,i._)("span",qt,(0,n.zw)(o.rating),1)]),(0,i._)("div",Bt,[(0,i._)("span",Rt,(0,n.zw)(o.rated),1),(0,i._)("span",Pt,(0,n.zw)(a.movieYear)+" year",1),(0,i._)("span",$t,(0,n.zw)(o.runtime),1)]),(0,i._)("div",At,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.movieGenres,(e=>((0,i.wg)(),(0,i.iD)("span",{key:e},(0,n.zw)(e),1)))),128))]),(0,i._)("p",Yt,(0,n.zw)(o.description),1)])]),(0,i._)("div",Gt,[(0,i.Wm)(c,{class:"movie__action is-only-icon is-back",link:!0,to:a.linkBack},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{class:"movie__action-icon",prefix:"fas",iconName:"arrow-left"}),Jt])),_:1},8,["to"])])])])),_:1})}var Qt={props:["id","img","title","rating","rated","year","genres","runtime","description","favorite"],setup(e){const t=(0,oe.tv)(),o=(0,F.oR)(),a=(0,i.Fl)((()=>e.genres.split(","))),s=(0,i.Fl)((()=>parseInt(e.year))),n=(0,i.Fl)((()=>e.favorite)),r=(0,N.iH)(null),l=t.options.history.state.back,c=async()=>{try{o.dispatch("updateFavorite",e.id),r.value.toggle.blur()}catch(t){console.log(t)}};return{movieGenres:a,movieYear:s,isFavorite:n,linkBack:l,toggle:r,toggleFavoriteMovie:c}}};const Xt=(0,M.Z)(Qt,[["render",Kt],["__scopeId","data-v-12f275b3"]]);var eo=Xt,to={props:["id"],components:{MovieDetail:eo},setup(e){const t=(0,F.oR)(),o=(0,N.iH)(null);return o.value=t.getters.movies.find((t=>t.id===e.id)),{selectedMovie:o}}};const oo=(0,M.Z)(to,[["render",Vt]]);var ao=oo;function io(e,t,o,a,s,n){const r=(0,i.up)("add-movie"),l=(0,i.up)("movies-list"),c=(0,i.up)("base-section");return(0,i.wg)(),(0,i.j4)(c,{class:"movies",title:"Movies",hiddenTitle:!0},{default:(0,i.w5)((()=>[(0,i.Wm)(r),(0,i.Wm)(l,{movies:a.favoriteMovies},null,8,["movies"])])),_:1})}var so={components:{MoviesList:vt,AddMovie:jt},setup(){const e=(0,F.oR)(),t=(0,i.Fl)((()=>e.getters.favoriteMovies));return{favoriteMovies:t}}};const no=(0,M.Z)(so,[["render",io]]);var ro=no,lo=o.p+"img/404.2ae4a6ea.avif";const co=e=>((0,i.dD)("data-v-321b2d2c"),e=e(),(0,i.Cn)(),e),uo={class:"page-error__content"},vo=co((()=>(0,i._)("picture",{class:"page-error__picture"},[(0,i._)("img",{class:"page-error__image",src:lo,alt:"not found"})],-1))),mo=co((()=>(0,i._)("h2",{class:"page-error__title"},"404 - page not found",-1))),po=co((()=>(0,i._)("p",{class:"page-error__text"},"The server could not locate the page you are looking for. This may be due to a broken link, outdated URL, or the page may have been removed or relocated.",-1)));function go(e,t){const o=(0,i.up)("base-button"),a=(0,i.up)("base-section");return(0,i.wg)(),(0,i.j4)(a,{class:"page-error",hiddenTitlte:!0},{default:(0,i.w5)((()=>[(0,i._)("div",uo,[vo,mo,po,(0,i.Wm)(o,{class:"page-error__link is-secondary",link:!0,to:"/movies"},{default:(0,i.w5)((()=>[(0,i.Uk)("Home")])),_:1})])])),_:1})}const _o={},fo=(0,M.Z)(_o,[["render",go],["__scopeId","data-v-321b2d2c"]]);var ho=fo;function wo(e,t,o,s,r,l){const c=(0,i.up)("base-modal"),d=(0,i.up)("base-spinner"),u=(0,i.up)("base-input"),v=(0,i.up)("error-message"),m=(0,i.up)("base-button"),p=(0,i.up)("base-form"),g=(0,i.up)("base-section");return(0,i.wg)(),(0,i.j4)(g,{class:"auth",title:"Login",hiddenTitle:!0},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{show:!!s.error,title:"Failed to authenticate!",onClose:s.handleError},{default:(0,i.w5)((()=>[(0,i._)("p",null,(0,n.zw)(s.error),1)])),_:1},8,["show","onClose"]),s.isLoading?((0,i.wg)(),(0,i.j4)(d,{key:0})):(0,i.kq)("",!0),(0,i.Wm)(p,{actions:!0,onSubmit:(0,a.iM)(s.submitForm,["prevent"])},{actions:(0,i.w5)((()=>[(0,i.Wm)(m,{type:"submit",class:"is-secondary"},{default:(0,i.w5)((()=>[(0,i.Uk)("Login")])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(u,{label:"Email",type:"email",id:"email",placeholder:"enter email...",modelValue:s.emailInput,"onUpdate:modelValue":t[0]||(t[0]=e=>s.emailInput=e),modelModifiers:{trim:!0}},null,8,["modelValue"]),(0,i.Wm)(u,{label:"Password",type:"password",id:"password",placeholder:"enter password...",modelValue:s.passwordInput,"onUpdate:modelValue":t[1]||(t[1]=e=>s.passwordInput=e),modelModifiers:{trim:!0}},null,8,["modelValue"]),(0,i.Wm)(a.uT,{name:"fade",mode:"out-in"},{default:(0,i.w5)((()=>[s.formIsValid?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(v,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)("Please enter a valid email and password.")])),_:1}))])),_:1})])),_:1},8,["onSubmit"])])),_:1})}var bo={components:{BaseForm:bt,BaseInput:at,ErrorMessage:Ct},setup(){const e=(0,F.oR)(),t=(0,oe.tv)(),o=(0,N.iH)(""),a=(0,N.iH)(""),s=(0,N.iH)(!0),n=(0,N.iH)(null),r=(0,N.iH)(!1),l=async()=>{if(!o.value&&!o.value.includes("@")||!a.value)return void(s.value=!1);const i={email:o.value,password:a.value};r.value=!0;try{await e.dispatch("login",i),await e.dispatch("loadMovies"),t.replace("/movies")}catch(l){n.value=l.message||"Something went wrong"}r.value=!1},c=()=>{n.value=null};return(0,i.YP)([o,a],(([e,t])=>{(e.length||t.length)&&(s.value=!0)})),{emailInput:o,passwordInput:a,submitForm:l,formIsValid:s,isLoading:r,error:n,handleError:c}}};const ko=(0,M.Z)(bo,[["render",wo]]);var yo=ko;function Mo(e,t,o,s,r,l){const c=(0,i.up)("base-modal"),d=(0,i.up)("base-spinner"),u=(0,i.up)("base-input"),v=(0,i.up)("error-message"),m=(0,i.up)("base-button"),p=(0,i.up)("base-form"),g=(0,i.up)("base-section");return(0,i.wg)(),(0,i.j4)(g,{class:"auth",title:"Login",hiddenTitle:!0},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{show:!!s.error,title:"Failed to authenticate!",onClose:s.handleError},{default:(0,i.w5)((()=>[(0,i._)("p",null,(0,n.zw)(s.error),1)])),_:1},8,["show","onClose"]),s.isLoading?((0,i.wg)(),(0,i.j4)(d,{key:0})):(0,i.kq)("",!0),(0,i.Wm)(p,{actions:!0,onSubmit:(0,a.iM)(s.submitForm,["prevent"])},{actions:(0,i.w5)((()=>[(0,i.Wm)(m,{type:"submit",class:"is-secondary"},{default:(0,i.w5)((()=>[(0,i.Uk)("Sing up")])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(u,{label:"Email",type:"email",id:"email",placeholder:"enter email...",modelValue:s.emailInput,"onUpdate:modelValue":t[0]||(t[0]=e=>s.emailInput=e),modelModifiers:{trim:!0}},null,8,["modelValue"]),(0,i.Wm)(u,{label:"Password",type:"password",id:"password",placeholder:"enter password...",modelValue:s.passwordInput,"onUpdate:modelValue":t[1]||(t[1]=e=>s.passwordInput=e),modelModifiers:{trim:!0}},null,8,["modelValue"]),(0,i.Wm)(a.uT,{name:"fade",mode:"out-in"},{default:(0,i.w5)((()=>[s.formIsValid?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(v,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)("Please enter a valid email and password (must be at least 6 characters).")])),_:1}))])),_:1})])),_:1},8,["onSubmit"])])),_:1})}var Io={components:{BaseForm:bt,BaseInput:at,ErrorMessage:Ct},setup(){const e=(0,F.oR)(),t=(0,oe.tv)(),o=(0,N.iH)(""),a=(0,N.iH)(""),s=(0,N.iH)(!0),n=(0,N.iH)(null),r=(0,N.iH)(!1),l=async()=>{if(!o.value&&!o.value.includes("@")||a.value.length<6)return void(s.value=!1);const i={email:o.value,password:a.value};r.value=!0;try{await e.dispatch("singup",i),t.replace("/movies")}catch(l){n.value=l.message||"Something went wrong"}r.value=!1},c=()=>{n.value=null};return(0,i.YP)([o,a],(([e,t])=>{(e.length||t.length)&&(s.value=!0)})),{emailInput:o,passwordInput:a,submitForm:l,formIsValid:s,isLoading:r,error:n,handleError:c}}};const Co=(0,M.Z)(Io,[["render",Mo]]);var Wo=Co;const xo=(0,oe.p7)({history:(0,oe.PO)(),routes:[{path:"/",redirect:"movies"},{path:"/movies",component:St},{path:"/movies/:id",component:ao,props:!0},{path:"/favorites",component:ro},{path:"/login",component:yo,meta:{requiresUnauth:!0}},{path:"/singup",component:Wo,meta:{requiresUnauth:!0}},{path:"/:notFound(.*)",component:ho}],linkActiveClass:"is-active",linkExactActiveClass:"is-ex-active"});xo.beforeEach(((e,t,o)=>{const a=localStorage.getItem("token");e.meta.requiresUnauth&&a?o("movies"):o()}));var jo=xo;o(1703);const Fo="21081c5e",To={state(){return{movies:[],filteredMovies:[],allMoviesOption:"All"}},mutations:{updateMovies(e,t){e.movies=t},updateFilteredMovies(e,t){e.filteredMovies=t},addMovie(e,t){e.movies.unshift(t)}},actions:{async addMovie(e,t){const o=await fetch(`https://www.omdbapi.com/?t=${t}&apikey=${Fo}`),a=await o.json();if("False"===a.Response)throw new Error(a.Error||"Faild to fetch!");e.dispatch("checkExistingMovie",a.Title);const i={img:a.Poster,title:a.Title,description:a.Plot,rating:a.imdbRating,genre:a.Genre,rated:a.Rated,year:a.Year,runtime:a.Runtime,favorite:!1};await e.dispatch("saveMovie",{movie:i})},async saveMovie(e,t){const o=e.rootGetters.userId,a=await fetch(`https://movie-holder-default-rtdb.firebaseio.com/users/${o}/movies.json`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.movie)}),i=await a.json();if(!a.ok){const e=i.error.message.toLowerCase().split("_").join(" ");throw new Error(e||"Failed to save movie.")}const s={...t.movie,id:i.name};e.commit("addMovie",s)},async loadMovies(e){const t=e.rootGetters.userId,o=await fetch(`https://movie-holder-default-rtdb.firebaseio.com/users/${t}/movies.json`),a=await o.json();if(!o.ok){const e=a.error.message.toLowerCase().split("_").join(" ");throw new Error(e||"Failed to load movies.")}const i=[];for(const s in a)i.push({...a[s],id:s});e.commit("updateMovies",i)},async removeMovie(e,t){const o=e.rootGetters.userId,a=await fetch(`https://movie-holder-default-rtdb.firebaseio.com/users/${o}/movies/${t}.json`,{method:"DELETE"}),i=await a.json();if(!a.ok){const e=i.error.message.toLowerCase().split("_").join(" ");throw new Error(e||"Failed to remove movie.")}const s=e.state.movies.filter((e=>e.id!==t));e.commit("updateMovies",s)},async updateFavorite(e,t){const o=e.rootGetters.userId,a=e.state.movies.find((e=>e.id===t));a.favorite=!a.favorite;const i=await fetch(`https://movie-holder-default-rtdb.firebaseio.com/users/${o}/movies/${t}.json`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),s=await i.json();if(!i.ok){const e=s.error.message.toLowerCase().split("_").join(" ");throw new Error(e||"Failed to update movie.")}},filterMovies(e,t){let o=[];o=t.genre&&t.genre!==e.state.allMoviesOption?t.movies.filter((e=>e.genre.includes(t.genre))):t.movies,e.commit("updateFilteredMovies",o)},searchMovies(e,t){const o=t.searchTerm?t.movies.filter((e=>e.title.toLowerCase().includes(t.searchTerm.toLowerCase()))):t.movies;e.commit("updateFilteredMovies",o)},checkExistingMovie(e,t){e.state.movies.forEach((e=>{if(e.title.includes(t))throw new Error("Movie already exist! Please try another.")}))}},getters:{movies(e){return e.movies},filteredMovies(e){return e.filteredMovies},hasMovies(e){return e.filteredMovies&&e.filteredMovies.length>0},favoriteMovies(e){return e.movies.filter((e=>e.favorite))},hasFavoriteMovies(e,t){return t.favoriteMovies&&t.favoriteMovies.length>0},allMoviesOption(e){return e.allMoviesOption}}};var So=To;const Vo="AIzaSyAajOB2yovVy6Gh_2OKju8kMEpfwCLL-5E";let Do;const Lo={state(){return{userId:null,token:null}},mutations:{setUser(e,t){e.userId=t.userId,e.token=t.token}},actions:{async auth(e,t){const o="login"===t.action?`https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${Vo}`:`https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${Vo}`,a=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,password:t.password,returnSecureToken:!0})}),i=await a.json();if(!a.ok){const e=i.error.message.toLowerCase().split("_").join(" ");throw new Error(e||"Failed to authenticate.")}const s={userId:i.localId,token:i.idToken},n=1e3*Number(i.expiresIn),r=(new Date).getTime()+n;localStorage.setItem("token",s.token),localStorage.setItem("userId",s.userId),localStorage.setItem("tokenExpiration",r),Do=setTimeout((()=>{e.dispatch("logout")}),n),e.commit("setUser",s)},async login(e,t){return e.dispatch("auth",{...t,action:"login"})},async singup(e,t){return e.dispatch("auth",{...t,action:"singup"})},autoLogin(e){const t=localStorage.getItem("token"),o=localStorage.getItem("userId"),a=localStorage.getItem("tokenExpiration"),i=Number(a)-(new Date).getTime();i<0||(Do=setTimeout((()=>{e.dispatch("logout")}),i),t&&o&&e.commit("setUser",{token:t,userId:o}))},logout(e){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("tokenExpiration"),clearTimeout(Do),e.commit("updateMovies",[]),e.commit("setUser",{userId:null,token:null})}},getters:{userId(e){return e.userId},token(e){return e.token},isAuthenticated(e){return!!e.token}}};var Ho=Lo;const zo=(0,F.MT)({modules:{movies:So,auth:Ho}});var Eo=zo;const No=["type"];function Oo(e,t,o,a,s,r){const l=(0,i.up)("router-link");return o.link?((0,i.wg)(),(0,i.j4)(l,{key:1,to:o.to,class:(0,n.C_)(["btn",o.modifier])},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default",{},void 0,!0)])),_:3},8,["to","class"])):((0,i.wg)(),(0,i.iD)("button",{key:0,type:a.btnType,ref:"toggle",class:(0,n.C_)(["btn",o.modifier])},[(0,i.WI)(e.$slots,"default",{},void 0,!0)],10,No))}var Zo={props:["type","modifier","link","to"],setup(e){const t=(0,i.Fl)((()=>e.type?e.type:"button")),o=(0,N.iH)(null);return{btnType:t,toggle:o}}};const Uo=(0,M.Z)(Zo,[["render",Oo],["__scopeId","data-v-8024d8a2"]]);var qo=Uo;const Bo={class:"section"};function Ro(e,t,o,a,s,r){return(0,i.wg)(),(0,i.iD)("section",Bo,[o.title?((0,i.wg)(),(0,i.iD)("h2",{key:0,class:(0,n.C_)(["title",!o.hiddenTitle||"ghost"])},(0,n.zw)(o.title),3)):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"default",{},void 0,!0)])}var Po={props:["title","hiddenTitle"]};const $o=(0,M.Z)(Po,[["render",Ro],["__scopeId","data-v-6803b1f4"]]);var Ao=$o,Yo=o.p+"img/opps.3b39af90.jpg";const Go=e=>((0,i.dD)("data-v-14888702"),e=e(),(0,i.Cn)(),e),Jo=["aria-expanded"],Ko={key:0,class:"modal",title:"Modal",hiddenTitle:!0,"aria-modal":"true",role:"dialog"},Qo={class:"modal__title"},Xo={class:"modal__title-text"},ea=Go((()=>(0,i._)("picture",{class:"modal__picture"},[(0,i._)("img",{src:Yo,alt:"Something went wrong"})],-1))),ta={key:0,class:"modal__message"},oa={key:1,class:"modal__actions"};function aa(e,t,o,s,r,l){const c=(0,i.up)("base-button");return(0,i.wg)(),(0,i.j4)(i.lR,{to:"body"},[o.show?((0,i.wg)(),(0,i.iD)("div",{key:0,onClick:t[0]||(t[0]=(...e)=>s.hideModal&&s.hideModal(...e)),class:"backdrop","aria-expanded":o.show},null,8,Jo)):(0,i.kq)("",!0),(0,i.Wm)(a.uT,{name:"modal"},{default:(0,i.w5)((()=>[o.show?((0,i.wg)(),(0,i.iD)("div",Ko,[(0,i._)("div",Qo,[(0,i.WI)(e.$slots,"title",{},(()=>[(0,i._)("p",Xo,(0,n.zw)(o.title),1)]),!0)]),ea,o.message?((0,i.wg)(),(0,i.iD)("div",ta,[(0,i.WI)(e.$slots,"default",{},void 0,!0)])):(0,i.kq)("",!0),o.fixed?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",oa,[(0,i.WI)(e.$slots,"actions",{},(()=>[(0,i.Wm)(c,{onClick:s.hideModal},{default:(0,i.w5)((()=>[(0,i.Uk)("Got it")])),_:1},8,["onClick"])]),!0)]))])):(0,i.kq)("",!0)])),_:3})])}var ia={props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},fixed:{type:Boolean,required:!1,default:!1},message:{type:Boolean,required:!1,default:!0}},emits:["close"],setup(e,t){const o=()=>{e.fixed||t.emit("close")};return{hideModal:o}}};const sa=(0,M.Z)(ia,[["render",aa],["__scopeId","data-v-14888702"]]);var na=sa;const ra={class:"svg-wrapper","aria-hidden":"true"};function la(e,t,o,a,s,n){const r=(0,i.up)("font-awesome-icon");return(0,i.wg)(),(0,i.iD)("span",ra,[(0,i.Wm)(r,{icon:[o.prefix,o.iconName]},null,8,["icon"])])}var ca=o(3494),da=o(8539),ua=o(8429),va=o(7749);ca.vI.add(da.mRB,ua.NCV);var ma=va.GN,pa={components:{FontAwesomeIcon:ma},props:["prefix","iconName"]};const ga=(0,M.Z)(pa,[["render",la],["__scopeId","data-v-f7f43046"]]);var _a=ga;const fa=e=>((0,i.dD)("data-v-8e4ec5d8"),e=e(),(0,i.Cn)(),e),ha={class:"spinner"},wa=fa((()=>(0,i._)("div",{class:"lds-roller"},[(0,i._)("div"),(0,i._)("div"),(0,i._)("div"),(0,i._)("div"),(0,i._)("div"),(0,i._)("div"),(0,i._)("div"),(0,i._)("div")],-1))),ba=[wa];function ka(e,t){return(0,i.wg)(),(0,i.iD)("div",ha,ba)}const ya={},Ma=(0,M.Z)(ya,[["render",ka],["__scopeId","data-v-8e4ec5d8"]]);var Ia=Ma;const Ca=(0,a.ri)(te);Ca.component("base-button",qo),Ca.component("base-section",Ao),Ca.component("base-modal",na),Ca.component("base-icon",_a),Ca.component("base-spinner",Ia),Ca.use(Eo),Ca.use(jo),jo.isReady().then((()=>{Ca.mount("#app")}))}},t={};function o(a){var i=t[a];if(void 0!==i)return i.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,a,i,s){if(!a){var n=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],s=e[d][2];for(var r=!0,l=0;l<a.length;l++)(!1&s||n>=s)&&Object.keys(o.O).every((function(e){return o.O[e](a[l])}))?a.splice(l--,1):(r=!1,s<n&&(n=s));if(r){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[a,i,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/movies/"}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,s,n=a[0],r=a[1],l=a[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(i in r)o.o(r,i)&&(o.m[i]=r[i]);if(l)var d=l(o)}for(t&&t(a);c<n.length;c++)s=n[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},a=self["webpackChunkmovie_holder"]=self["webpackChunkmovie_holder"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(187)}));a=o.O(a)})();
//# sourceMappingURL=app.5be3a99d.js.map